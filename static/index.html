<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Spring MVC 3.1 Walkthrough</title>

  <meta name="viewport" content="width=device-width"/>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>
  <script type="text/javascript" src="./js/coffee-script.js"></script>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" >

  
    <link rel="stylesheet" href="file/style.css" type="text/css"/>
  

  

  <script type="text/javascript">
  $(function(){
      setupPreso(false, './');
  });
  </script>

</head>

<body>

<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">z, ?</td><td>toggle help (this)</td></tr>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">shift-space, &larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>toggle debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c, t</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">n</td><td>toggle notes</td></tr>
    <tr><td class="key">p</td><td>run preshow</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
  <span id="notesInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div class="slide" data-transition="none">
  <div class="content subsection" ref="intro/slides/1">
<h1>Spring MVC 3.1 Walkthrough</h1>

<br><br>


<h2>Rossen Stoyanchev</h2>

<h3><em>SpringSource, VMware</em></h3></br>
</br>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets center" ref="intro/slides/2">
<h1>Overview</h1>

<ul>
<li>All Java-based web config</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets center" ref="intro/slides/3">
<h1>Overview</h1>

<ul>
<li>New @MVC support classes</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets center" ref="intro/slides/4">
<h1>Overview</h1>

<ul>
<li>Redirect and flash attributes</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets center" ref="intro/slides/5">
<h1>Overview</h1>

<ul>
<li>Improved content negotiation</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets center" ref="intro/slides/6">
<h1>Overview</h1>

<ul>
<li>URI variable support in new places</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets center" ref="intro/slides/7">
<h1>Overview</h1>

<ul>
<li>Partial validation with <code>@Validated</code></li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets center" ref="intro/slides/8">
<h1>Overview</h1>

<ul>
<li>Improved URI building and encoding</li>
<li><code>UriComponentsBuilder</code>, <br> <code>ServletUriComponentsBuilder</code></br>
</li>
</ul>
</div>
</div><div class="slide" data-transition="none">
  <div class="content bullets center" ref="intro/slides/9">
<h1>Overview</h1>

<ul>
<li>New controller method arguments <br> for multipart requests</br>
<li><code>@RequestPart</code>, <br> <code>javax.servlet.http.Part</code></br>
</li>
</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets center" ref="intro/slides/10">
<h1>Overview</h1>

<ul>
<li>Support for HTTP PUT form submissions</li>
<li><code>HttpPutFormContentFilter</code></li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets center" ref="intro/slides/11">
<h1>Overview</h1>

<ul>
<li>Support for encoding and signing URLs</li>
<li><code>RequestDataValueProcessor</code></li>
<li>Used by <a href="http://hdiv.org/">HDIV</a></li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="java-config/slides/1">
<h1>Java web config</h1></div>
</div><div class="slide" data-transition="none"><div class="content incremental bullets" ref="java-config/slides/2">
<h1>DispatcherServlet</h1>

<h1>Config</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="java-config/slides/3">
<h2>Defaults listed in</h2>

<h2><code>DispatcherServlet.properties</code></h2></div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="java-config/slides/4">
<h2>DispatcherServlet.properties</h2>

<pre class="sh_"><code>
org.springframework.web.servlet.HandlerMapping=\
     ...BeanNameUrlHandlerMapping,\
     ...DefaultAnnotationHandlerMapping

org.springframework.web.servlet.HandlerAdapter=
     ...HttpRequestHandlerAdapter,\
     ...SimpleControllerHandlerAdapter,\
     ...AnnotationMethodHandlerAdapter

org.springframework.web.servlet.ViewResolver=\
     ...InternalResourceViewResolver

org.springframework.web.servlet.HandlerExceptionResolver=\
     ...AnnotationMethodHandlerExceptionResolver,\
     ...ResponseStatusExceptionResolver,\
     ...DefaultHandlerExceptionResolver

...</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="java-config/slides/5">
<h2>Defaults turned off (by type)</h2>

<h2>as you add to your config</h2>

<ul>
<li><code>HandlerMapping</code></li>
<li><code>HandlerAdapter</code></li>
<li><code>ViewResolver</code></li>
<li>...</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="java-config/slides/6">
<h2>Intended to be</h2>

<ul>
<li>Flexible</li>
<li>Transparent</li>
<li>Agnostic (fit diverse needs)</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content incremental bullets" ref="java-config/slides/7">
<h1>MVC XML Namespace</h1>

<h3>(Spring 3.0)</h3></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="java-config/slides/8">
<h1>Higher-level config</h1>

<ul>
<li>Compact</li>
<li>Expressive</li>
<li>No Spring MVC beans to see</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="java-config/slides/9">
<h1>It's also...</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="java-config/slides/10">
<h1>more opinionated</h1></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="java-config/slides/11">
<h1>Intended to be</h1>

<ul>
<li>A common starting point</li>
<li>Low barrier of entry</li>
<li>Convenient</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="java-config/slides/12">
<h1>What about transparency?</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="java-config/slides/13">
<h1>Flexibility?</h1></div>
</div><div class="slide" data-transition="none"><div class="content incremental bullets" ref="java-config/slides/14">
<h1>MVC Java Config</h1>

<h3>(New in Spring 3.1)</h3></div>
</div><div class="slide" data-transition="none"><div class="content" ref="java-config/slides/15">
<h2>Similar to the MVC namespace</h2>

<h2>but in Java</h2></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="java-config/slides/16">
<h1>Transparent &amp; Flexible</h1>

<ul>
<li>Easy to see the underlying beans</li>
<li>and customize them</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="java-config/slides/17">
<h1>A common starting point</h1>

<h3>(comparable to <code>&lt;mvc:annotation:driven/&gt;</code>)</h3>

<pre class="sh_java"><code>
    @EnableWebMvc
    @Configuration
    public class WebConfig {




    }</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="java-config/slides/18">
<h1>Customizations</h1>

<pre class="sh_java"><code>
@EnableWebMvc
@Configuration
public class WebConfig {













}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="java-config/slides/19">
<h1>Customizations</h1>

<pre class="sh_java"><code>
@EnableWebMvc
@Configuration
public class WebConfig implements WebMvcConfigurer {













}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="java-config/slides/20">
<h1>Customizations</h1>

<pre class="sh_java"><code>
@EnableWebMvc
@Configuration
public class WebConfig extends WebMvcConfigurerAdapter {













}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="java-config/slides/21">
<h1>Customizations</h1>

<pre class="sh_java"><code>
@EnableWebMvc
@Configuration
public class WebConfig extends WebMvcConfigurerAdapter {

  @Override
  protected void addFormatters(FormatterRegistry reg) {
    // ...
  }








}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="java-config/slides/22">
<h1>Customizations</h1>

<pre class="sh_java"><code>
@EnableWebMvc
@Configuration
public class WebConfig extends WebMvcConfigurerAdapter {

  @Override
  protected void addFormatters(FormatterRegistry reg) {
    // ...
  }

  @Override
  public void addInterceptors(InterceptorRegistry reg){
    // like &lt;mvc:interceptors&gt;
  }



}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="java-config/slides/23">
<h1>Customizations</h1>

<pre class="sh_java"><code>
@EnableWebMvc
@Configuration
public class WebConfig extends WebMvcConfigurerAdapter {

  @Override
  protected void addFormatters(FormatterRegistry reg) {
    // ...
  }

  @Override
  public void addInterceptors(InterceptorRegistry reg){
    // like &lt;mvc:interceptors&gt;
  }

  // ... see all options in WebMvcConfigurer

}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="java-config/slides/24">
<h2>So far no Spring MVC beans in sight</h2>

<h3>(Configuration is imported rather than extended)</h3></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="java-config/slides/25">
<h1>Shift into low gear</h1>

<ul>
<li>Remove <code>@EnableWebMvc</code> annotation</li>
<li>Change base class to <code>WebMvcConfigurationSupport</code></li>
<li>You're now extending the actual configuration</li>
<li>May override base class <code>@Bean</code> methods</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="java-config/slides/26">
<h1>Replacing <code>web.xml</code></h1>

<h1>with Java</h1>

<h3>(Servlet 3.0)</h3></div>
</div><div class="slide" data-transition="none"><div class="content" ref="java-config/slides/27">
<h2>Create an implementation of <code>WebApplicationInitializer</code></h2></div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="java-config/slides/28">
<pre class="sh_java"><code>
public class MyWebAppInitializer
       implements WebApplicationInitializer {

  @Override
  public void onStartup(ServletContext container) {

    AnnotationConfigWebApplicationContext cxt =
      new AnnotationConfigWebApplicationContext();
    cxt.register(MyWebConfig.class);

    ServletRegistration.Dynamic disp = 
      container.addServlet("d", new DispatcherServlet(cxt));

    disp.setLoadOnStartup(1);
    disp.addMapping("/");
  }

}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="infrastructure/slides/1">
<h1>@MVC support classes</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="infrastructure/slides/2">
<h1>Old</h1>

<h2><code>DefaultAnnotationHandlerMapping</code>, <code>AnnotationMethodHandlerAdapter</code>, <code>AnnotationMethodExceptionResolver</code></h2>

<br>


<h1>New</h1>

<h2><code>RequestMappingHandlerMapping</code>, <code>RequestMappingHandlerAdapter</code>, <code>ExceptionHandlerExceptionResolver</code></h2></br>
</div>
</div><div class="slide" data-transition="none"><div class="content incremental bullets" ref="infrastructure/slides/3">
<h1>New classes named after...</h1>

<ul>
<li><strong><code>{@RequestMapping}</code></strong><code>HandlerMapping</code></li>
<li><strong><code>{@RequestMapping}</code></strong><code>HandlerAdapter</code></li>
<li><strong><code>{@ExceptionHandler}</code></strong><code>ExceptionResolver</code></li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="infrastructure/slides/4">
<h1>Why does it matter?</h1>

<ul>
<li>Better internal design</li>
<li>More flexible</li>
<li>Customizable @MVC</li>
<li>Help address many JIRA issues</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="infrastructure/slides/5">
<h1>What you should know</h1>

<ul>
<li>Existing classes continue to exist</li>
<li>However no new features</li>
<li>Verify what you have in use</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="infrastructure/slides/6">
<h2>To upgrade simply replace occurrences of</h2>

<h2>the old classes with the new ones in your config</h2></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="infrastructure/slides/7">
<h1>Or if using..</h1>

<ul>
<li><code>&lt;mvc:annotation-driven /&gt;</code></li>
<li><code>@EnableWebMvc</code></li>
<li>No action required</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="infrastructure/slides/8">
<h1>After the upgrade</h1>

<ul>
<li>Things should work the same</li>
<li>Some request mapping scenarios<br> no longer supported</br>
<li>Review 3.1.1 docs for important notes</li>
<li><code>@RequestMapping</code> javadoc also updated</li>
</li>
</ul>
</div>
</div><div class="slide" data-transition="none">
  <div class="content" ref="infrastructure/slides/9">
<h2>More on this subject</h2>

<br>


<h2>Thursday 4pm<br/>

<br>


<h2><a href="http://devnexus.com/s/presentations#id-1321">"An In-depth Look At Spring MVC 3.1"</a></h2></br>
</h2>
</br></div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="redirect/slides/1">
<h1>Redirect &amp; Flash Attributes</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="redirect/slides/2">
<h1><code>RedirectAttributes</code></h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="redirect/slides/3">
<h2>A new controller method argument</h2></div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="redirect/slides/4">
<h1>Example</h1>

<pre class="sh_java"><code>
    @RequestMapping(method=POST)
    public String save(Entity entity, Errors errors,
                       RedirectAttributes redirectAttrs){

        // ...

        return "redirect:/someUrl";
    }</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="redirect/slides/5">
<h1>The two main cases</h1>

<ul>
<li>Redirect URL query parameters</li>
<li>Flash attributes</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="redirect/slides/6">
<h1>Redirect URL query params</h1>

<pre class="sh_java"><code>
    @RequestMapping(method=POST)
    public String save(Entity entity, Errors errors,
                       RedirectAttributes redirectAttrs){

        // ...

        redirectAttrs.addAttribute("id", entity.getId);
        redirectAttrs.addAttribute("date", new Date());

        return "redirect:/someUrl";
    }</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content bullets" ref="redirect/slides/7">
<h1>Redirects to</h1>

<ul>
<li><code>/someUrl?id=123&amp;date=03/21/2012</code></li>
</ul>


<h3><em>(note the DataBinder-formatted date value)</em></h3></div>
</div><div class="slide" data-transition="none"><div class="content" ref="redirect/slides/8">
<h2>What if you wanted keep the URL free of</h2>

<h2>some parames that "pollute" the URL?</h2></div>
</div><div class="slide" data-transition="none"><div class="content" ref="redirect/slides/9">
<h2>Or had a complex object you wanted to store</h2>

<h2>temporarily until after the redirect?</h2></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="redirect/slides/10">
<h1>Flash attributes</h1>

<ul>
<li>A way to pass attributes across a redirect</li>
<li>Without involving the URL</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="redirect/slides/11">
<h1>Before the redirect</h1>

<pre class="sh_java"><code>
  @RequestMapping(method=POST)
  public String save(Entity entity, Errors errors,
                     RedirectAttributes redirectAttrs){

    // ...

    redirectAttrs.addFlashAttribute("message", "Yay!");

    return "redirect:/someUrl";
  }</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="redirect/slides/12">
<h1>After the redirect</h1>

<ul>
<li>Nothing special to do</li>
<li>Flash attributes should be in the model</li>
<li>But won't survive another refresh</li>
<li>"Consumed" immediately</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="redirect/slides/13">
<h1>Flash storage</h1>

<ul>
<li><code>SessionFlashMapManager</code> used by default</li>
<li>Cookie-based implementation</li>
<li>Planned <a href="https://jira.springsource.org/browse/SPR-8997">SPR-8997</a></li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="content-negotiation/slides/1">
<h1>Content Negotiation</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="content-negotiation/slides/2">
<h2>In 3.0 content negotiation was based on</h2>

<h2><code>@RequestMapping(headers="..")</code></h2></div>
</div><div class="slide" data-transition="none"><div class="content incremental bullets smaller" ref="content-negotiation/slides/3">
<h1>Producing content</h1>

<pre class="sh_java"><code>
@RequestMapping(header="Accept=application/json")
@ResponseBody
public Entity getEntity() {

}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content incremental bullets smaller" ref="content-negotiation/slides/4">
<h1>Consuming content</h1>

<pre class="sh_java"><code>
@RequestMapping(header="Content-Type=application/json")
@ResponseBody
public String save(@RequestBody Entity entity) {

}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="content-negotiation/slides/5">
<h2>However, header matching is not expressive</h2>

<h2>enough for content negotiation</h2></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental small" ref="content-negotiation/slides/6">
<h1>Clients may request more general content types</h1>

<ul>
<li>For example <code>"Accept=*/*"</code> or <code>"Accept=text/*"</code></li>
<li>Not an exact match</li>
<li>But semantically it does</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental small" ref="content-negotiation/slides/7">
<h1>Requested content may not be producible</h1>

<ul>
<li>A simple match or no match = 404 <code>NOT_FOUND</code></li>
<li>It should be 406 <code>NOT_ACCEPTABLE</code></li>
<li>or 415 <code>UNSUPPORTED_MEDIA_TYPE</code></li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental small" ref="content-negotiation/slides/8">
<h1>More than just mapping</h1>

<ul>
<li>What content will actually be produced?</li>
<li>Previously depended on ..</li>
<li>the order of <code>HttpMessageConvertet</code> registrations</li>
<li>Less control</li>
<li>Harder to reason about</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content incremental bullets small" ref="content-negotiation/slides/9">
<h1><code>@RequestMapping</code> <br> <code>consumes/produces</code></br>

<h3>(new in Spring 3.1)</h3>

<ul>
<li>Use instead of <code>headers=".."</code></li>
<li><code>"Content-Type"</code> and <code>"Accept"</code> headers</li>
</ul>
</h1>
</div>
</div><div class="slide" data-transition="none"><div class="content incremental bullets small" ref="content-negotiation/slides/10">
<h1>Producing content</h1>

<pre class="sh_java"><code>
@RequestMapping(header="Accept=application/json")
@ResponseBody
public Entity getEntity() {

}</code></pre></div>
</div><div class="slide" data-transition="fade"><div class="content incremental bullets small" ref="content-negotiation/slides/11">
<h1>Producing content</h1>

<pre class="sh_java"><code>
@RequestMapping(produces="application/json")
@ResponseBody
public Entity getEntity() {

}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content incremental bullets small" ref="content-negotiation/slides/12">
<h1>Consuming content</h1>

<pre class="sh_java"><code>
@RequestMapping(header="Content-Type=application/json")
@ResponseBody
public String save(@RequestBody Entity entity) {

}</code></pre></div>
</div><div class="slide" data-transition="fade"><div class="content incremental bullets small" ref="content-negotiation/slides/13">
<h1>Consuming content</h1>

<pre class="sh_java"><code>
@RequestMapping(consumes="application/json")
@ResponseBody
public String save(@RequestBody Entity entity) {

}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="content-negotiation/slides/14">
<h2>What happens to existing <code>headers=".."</code>?</h2></div>
</div><div class="slide" data-transition="none"><div class="content" ref="content-negotiation/slides/15">
<h2><code>"Accept"</code> and <code>"Content-Type"</code></h2>

<h2>automatically converted to <code>consumes/produces</code></h2></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental small" ref="content-negotiation/slides/16">
<h1><code>produces=".."</code> condition</h1>

<ul>
<li>Overall much more reliable!</li>
<li>Guarantees actual content type written out</li>
<li>Or returns appropriate HTTP status</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="uri-vars/slides/1">
<h1>URI Variables In More Places</h1></div>
</div><div class="slide" data-transition="none"><div class="content small" ref="uri-vars/slides/2">
<h1>URI variables in data binding</h1>

<pre class="sh_java"><code>
// GET /manu/chao

@RequestMapping(value="/{firstName}/{lastName}")
public String search(@ModelAttribute Person person,
                     BindingResult result) {

    // "manu".equals(person.getFirstName())
    // "chao".equals(person.getLastName())

}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content incremental bullets small" ref="uri-vars/slides/3">
<h1><code>@PathVariable</code> values available</h1>

<h1>in the model for rendering</h1>

<pre class="sh_java"><code>

@RequestMapping("/apps/edit/{slug}")
public String editForm(@PathVariable String slug){

    // ...

}</code></pre></div>
</div><div class="slide" data-transition="fade"><div class="content small" ref="uri-vars/slides/4">
<h1><code>@PathVariable</code> values available</h1>

<h1>in the model for rendering</h1>

<pre class="sh_java"><code>

@RequestMapping("/apps/edit/{slug}")
public String editForm(@PathVariable String slug){

    // No need to add "slug" to the model

}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="uri-vars/slides/5">
<h1><code>@PathVariable</code> values</h1>

<ul>
<li>Values merged into the model prior to rendering</li>
<li>Except for "automated" content generation <br> like JSON &amp; XML</br>
</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="uri-vars/slides/6">
<h1>URI variables in redirect strings</h1>

<pre class="sh_java"><code>
@RequestMapping(value="/{year}/{month}/{slug}",
                method=RequestMethod.POST)
public String createRoom() {




    return "redirect:/{year}/{month}/{slug}";
}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content small" ref="uri-vars/slides/7">
<h1>URI variables in redirect strings</h1>

<pre class="sh_java"><code>
@RequestMapping(value="/{year}/{month}/{slug}",
                method=RequestMethod.POST)
public String createRoom() {

    // No need to add "year", "month", "slug"


    return "redirect:/{year}/{month}/{slug}";
}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content small" ref="uri-vars/slides/8">
<h1>URI variables in redirect strings</h1>

<pre class="sh_java"><code>
@RequestMapping(value="/{year}/{month}/{slug}",
                method=RequestMethod.POST)
public String createRoom() {

    // No need to add "year", "month", "slug"
    // to the the model explicitly

    return "redirect:/{year}/{month}/{slug}";
}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="uri-vars/slides/9">
<h2><code>@ModelAttribute</code> ..</h2>

<h2>instantiated from a URI variable</h2></div>
</div><div class="slide" data-transition="none"><div class="content incremental bullets small" ref="uri-vars/slides/10">
<h1>Pre-requisites</h1>

<h2>(<code>@ModelAttribute</code> from a URI variable)</h2>

<ul>
<li>Model attribute name matches URI variable name</li>
<li>A <code>Converter&lt;String, ?&gt;</code> is available</li>
<li>The converter can load object from database</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="uri-vars/slides/11">
<h1>Example</h1>

<pre class="sh_java"><code>
@RequestMapping(value="/{account}", method = PUT)
public String update(@ModelAttribute Account account) {

    // ...



}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="uri-vars/slides/12">
<h1>Example</h1>

<pre class="sh_java"><code>
@RequestMapping(value="/{account}", method = PUT)
public String update(@ModelAttribute Account account) {

    // Model attribute name matches URI variable name



}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="uri-vars/slides/13">
<h1>Example</h1>

<pre class="sh_java"><code>
@RequestMapping(value="/{account}", method = PUT)
public String update(@ModelAttribute Account account) {

    // Model attribute name matches URI variable name

    // Converter&lt;String, Account&gt; is registered

}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="more/slides/1">
<h1>Partial validation</h1></div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="more/slides/2">
<h1>Partial validation</h1>

<pre class="sh_java"><code>
@RequestMapping(method = RequestMethod.PUT)
public String update(
    @Valid(group=MyGroup.class) Account account) {

    // ...

}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="more/slides/3">
<h1><code>UriComponents</code></h1></div>
</div><div class="slide" data-transition="none"><div class="content small" ref="more/slides/4">
<h1>Build URI</h1>

<pre class="sh_java"><code>
    UriComponents uriComp = 
        UriComponentsBuilder.fromPath("/foo")
            .queryParam("bar").build();



    uriComp.toUri();</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content small" ref="more/slides/5">
<h1>Build URI template and expand</h1>

<pre class="sh_java"><code>
    UriComponents uriComp = 
        UriComponentsBuilder.fromPath("/{foo}")
            .queryParam("bar").build();

    uriComp = uriComp.expand("fooValue");

    uriComp.toUri();</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content small" ref="more/slides/6">
<h1>Build URI template, expand &amp; encode</h1>

<pre class="sh_java"><code>
    UriComponents uriComp = 
        UriComponentsBuilder.fromPath("/{foo}")
            .queryParam("bar").build();

    uriComp = uriComp.expand("fooValue").encode();

    uriComp.toUri();</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="more/slides/7">
<h1>Create <code>"Location"</code> header</h1>

<pre class="sh_java"><code>
@RequestMapping(method = RequestMethod.POST)
public ResponseEntity createCustomer(UriComponentsBuilder b) {

    // Builder contains path relative to current URL...

    UriComponents uriComponents = 
        b.path("/customers/{id}").buildAndExpand(id);

    HttpHeaders headers = new HttpHeaders();
    headers.setLocation(uriComponents.toUriString()));
    return new ResponseEntity(headers, HttpStatus.CREATED);
}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="end/slides/1">
<h1>Looking Forward</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="end/slides/2">
<h1>Spring 3.2</h1></div>
</div><div class="slide" data-transition="none"><div class="content incremental bullets small" ref="end/slides/3">
<ul>
<li>Async request processing</li>
<li><a href="github.com/SpringSource/spring-test-mvc">spring-test-mvc</a></li>
<li><code>@Resource</code> stereotype <a href="https://jira.springsource.org/browse/SPR-8406">SPR-8406</a></li>
<li>Content negotiation refinements <a href="https://jira.springsource.org/browse/SPR-8410">SPR-8410</a></li>
<li>Global <code>@ExceptionHandler</code> methods</li>
<li>And much more!</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content incremental bullets small" ref="end/slides/4">
<h1>How to get involved</h1>

<ul>
<li>The Spring Framework now <a href="https://github.com/SpringSource/spring-framework#readme">on Github</a></li>
<li><a href="https://github.com/SpringSource/spring-framework-issues#readme">spring-framework-issues</a> repository</li>
<li>Gradle-based build (<a href="https://github.com/SpringSource/spring-framework/wiki/Gradle-build-and-release-FAQ">wiki</a>)</li>
<li>New SpringSource repository (<a href="https://github.com/SpringSource/spring-framework/wiki/SpringSource-repository-FAQ">wiki</a>)</li>
<li><a href="https://jira.springsource.org/browse/SPR">Spring JIRA</a></li>
</ul>
</div>
</div><div class="slide" data-transition="none">
  <div class="content" ref="end/slides/5">
<h2><strong>Slides Available At</strong><br/>

<br>


<h2><a href="https://github.com/rstoyanchev/spring-mvc-31-walkthrough">https://github.com/rstoyanchev/spring-mvc-31-walkthrough</a></h2></br>
</h2>
</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="end/slides/6">
<h1>Q&amp;A</h1>

<br/>


<h2>Rossen Stoyanchev</h2>

<h3>Twitter: <a href="http://twitter.com/rstoya05">@rstoya05</a></h3></div>
</div></div>

</body>
</html>
